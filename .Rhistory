aggregate(Discard.Mortality~Sector, data = gemm, FUN = sum)
gemm$grouped_sector = NA
gemm$grouped_sector[gemm$Sector == "Washington Recreational"] = "wa_rec"
gemm$grouped_sector[gemm$Sector == "California Recreational"] = "ca_rec"
gemm$grouped_sector[gemm$Sector == "Oregon Recreational"] = "or_rec"
gemm$grouped_sector[is.na(gemm$grouped_sector)] = "commercial"
gemm$grouped_sector
landings  = aggregate(Landings ~ Year + grouped_sector, data = gemm, drop = FALSE, FUN = sum)
discards  = aggregate(Discards ~ Year + grouped_sector, data = gemm, drop = FALSE, FUN = sum)
disc_mort = aggregate(Discard.Mortality ~ Year + grouped_sector, data = gemm, drop = FALSE, FUN = sum)
all_dead  = aggregate(Mortality..Landings.and.Discard.Mortality. ~ Year + grouped_sector, data = gemm, drop = FALSE, FUN = sum)
all_dead
dim(gemm)
tmp=all_dead
# Remove the research removals --
# Research removals are generally not included with commercial landings (although this does not need to be the case)
# however, removing them here allows you to correctly calculate the discard rate based on commercial data only
gemm = gemm[!gemm$Sector %in% "Research", ]
dim(gemm)
aggregate(Landings~Sector, data = gemm, FUN = sum)
aggregate(Discards~Sector, data = gemm, FUN = sum)
aggregate(Discard.Mortality~Sector, data = gemm, FUN = sum)
gemm$grouped_sector = NA
gemm$grouped_sector[gemm$Sector == "Washington Recreational"] = "wa_rec"
gemm$grouped_sector[gemm$Sector == "California Recreational"] = "ca_rec"
gemm$grouped_sector[gemm$Sector == "Oregon Recreational"] = "or_rec"
gemm$grouped_sector[is.na(gemm$grouped_sector)] = "commercial"
landings  = aggregate(Landings ~ Year + grouped_sector, data = gemm, drop = FALSE, FUN = sum)
discards  = aggregate(Discards ~ Year + grouped_sector, data = gemm, drop = FALSE, FUN = sum)
disc_mort = aggregate(Discard.Mortality ~ Year + grouped_sector, data = gemm, drop = FALSE, FUN = sum)
all_dead  = aggregate(Mortality..Landings.and.Discard.Mortality. ~ Year + grouped_sector, data = gemm, drop = FALSE, FUN = sum)
tmp
dim(tmp_)
dim(tmp)
temp[temp$Area=="commercial",]
tmp[tmp$Area=="commercial",]
tmp[tmp$grouped_sector=="commercial",]
tmp[tmp$grouped_sector=="commercial",c(1,3)]
cbind(tmp[tmp$grouped_sector=="commercial",c(1,3)],all_dead[all_dead$grouped_sector=="commercial",c(3)]
)
cbind(tmp[tmp$grouped_sector=="commercial",c(1,3)],all_dead[all_dead$grouped_sector=="commercial",c(3)])
